---
import Layout from "../layouts/Layout.astro";import { getEntry } from 'astro:content';import { Image } from 'astro:assets';import type { CollectionEntry } from 'astro:content';
const teamData = await getEntry('equipe', 'equipe');
type TeamEntry = CollectionEntry<'equipe'>;
type Member = TeamEntry['data']['members'][number];
const members = teamData.data.members;
---
<Layout title="Ã‰quipe">
  <section class="bg-[#f0f4f8] py-16">
    <div class="max-w-7xl mx-auto px-4 lg:px-8">
      <div class="bg-white rounded-lg shadow-sm p-10">
        <header class="mb-10 text-center">
          <h1 class="text-3xl font-bold text-gray-900 mb-4">
            {teamData.data.title}
          </h1>
          <p  class="text-gray-700 leading-relaxed text-base sm:text-lg">
            {teamData.data.description}
          </p>
        </header>
        <div class="swiper teamSwiper3D">
          <div class="swiper-wrapper">
            {members.map((member: Member) => (
              <div class="swiper-slide">
                <article class="flex flex-col items-center text-center bg-white rounded-lg p-6 h-full">
                  <div class="w-full border-t-2 border-gray-400 mb-6" />
                  <div class="w-32 h-32 rounded-full overflow-hidden mb-4">
                    <Image
                      src={member.image}
                      alt={member.name}
                      width={128}
                      height={128}
                      class="w-full h-full object-cover"
                      loading="lazy"
                      quality={80}
                    />
                  </div>
                  <h2 class="text-sm font-bold text-gray-900 mb-3">
                    {member.name}
                  </h2>
                  <p class="text-xs text-gray-900 leading-relaxed mb-3 px-2">
                    {member.role}
                  </p>
                  <p class="text-xs text-gray-900 mb-6">
                    {member.location}
                  </p>
                  <div class="w-full border-t-2 border-gray-400" />
                </article>
              </div>
            ))}
          </div>
          <div class="swiper-button-next" />
          <div class="swiper-button-prev" />
          <div class="swiper-pagination" />
        </div>
      </div>
    </div>
  </section>
</Layout>
<style>
.swiper {
  width: 100%;
  padding: 50px 0 70px;
  overflow: visible; 
}

.swiper-wrapper {
  overflow: visible; 
}
.swiper-slide {
  background-position: center;
  background-size: cover;
  width: 350px;
  height: 500px;
}

.swiper-slide article {
  box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
  transition: all 0.3s ease;
}

.swiper-slide-active article {
  transform: scale(1.05);
}

.swiper-button-next,
.swiper-button-prev {
  color: #1f2937;
}

.swiper-pagination-bullet-active {
  background: #1f2937;
}

.swiper-3d .swiper-slide-shadow-left,
.swiper-3d .swiper-slide-shadow-right {
  background-image: linear-gradient(
    to right,
    rgba(0, 0, 0, 0.5),
    rgba(0, 0, 0, 0)
  );
}
@media (max-width: 639px) {
  .teamSwiper3D {
    overflow: hidden;
  }

  .teamSwiper3D .swiper-wrapper {
    padding-left: 10px;
    padding-right: 10px;
  }

  .swiper-slide {
    width: 220px;
    height: 330px;
  }
}


</style>

<script>
  import Swiper from 'swiper';
  import { Navigation, Pagination, EffectCoverflow, Autoplay } from 'swiper/modules';
  import 'swiper/css';
  import 'swiper/css/navigation';
  import 'swiper/css/pagination';
  import 'swiper/css/effect-coverflow';

 new Swiper('.teamSwiper3D', {
  modules: [Navigation, Pagination, EffectCoverflow, Autoplay],
  effect: 'coverflow',
  grabCursor: true,
  centeredSlides: true,
  slidesPerView: 'auto',
  loop: true,

  coverflowEffect: {
    rotate: 50,
    stretch: 0,
    depth: 100,
    modifier: 1,
    slideShadows: true,
  },

  breakpoints: {
    0: {
      coverflowEffect: {
        rotate: 35,
        depth: 80,
        modifier: 0.9,
      },
    },
    640: {
      coverflowEffect: {
        rotate: 50,
        depth: 100,
        modifier: 1,
      },
    },
  },

  autoplay: {
    delay: 3000,
    disableOnInteraction: false,
  },

  pagination: {
    el: '.swiper-pagination',
    clickable: true,
  },

  navigation: {
    nextEl: '.swiper-button-next',
    prevEl: '.swiper-button-prev',
  },
});


</script>
