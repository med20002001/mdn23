---
const { event } = Astro.props;

const query =
  event.data.googleMapsUrl
    ? event.data.location
    : [event.data.address, event.data.city, event.data.country]
        .filter(Boolean)
        .join(", ");
---

{query && (
  <div class="rounded-lg border bg-card p-3 sm:p-4">
    
    <div class="relative w-full overflow-hidden rounded-md aspect-[16/9]">
      <iframe
        src={`https://maps.google.com/maps?q=${encodeURIComponent(query)}&output=embed`}
        class="absolute inset-0 w-full h-full border-0"
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"
      ></iframe>
    </div>

    <a
      href={
        event.data.googleMapsUrl ||
        `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`
      }
      target="_blank"
      rel="noopener noreferrer"
      class="mt-2 sm:mt-3 inline-block text-xs sm:text-sm text-primary hover:underline"
    >
      Ouvrir dans Google Maps
    </a>

  </div>
)}
